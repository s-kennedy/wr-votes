---
layout: "default"
---
{% comment %}
Try to eat up all leading slashes and the trailing .html . 
This is gross but it works.
{% endcomment %}
{% assign ward-id = page.url | replace: '.html', '' | split: '/' | last -%}
{% assign ward-info = site.data.internal.position-tags |
where:"PositionUniqueName",ward-id | first -%}


<h2>Who is Running? {{ ward-info.PositionDesc }}</h2>

{% assign municipal-info = site.data.internal.municipality-map |
where:"Name",ward-info.WardMunicipality | first %}
{% assign races-split = municipal-info.Races | split: ',' %}

{% for race in races-split %}
  {% if race == "_SELF" %}
    {% assign race-id = ward-id %}
  {% else %}
    {% assign race-id = race %}
  {% endif %}

  {% include list-nominees.html race-id=race-id %}

  {% include list-events.html race-id=race-id %}

  {% assign media-list = site.data.sync.media 
    | where_exp:"item", "item.PositionIDList contains race-id"
    %}

  <p><strong>Media List:</strong> {{ media-list }}</p>

{% comment %}
  {% assign news-list = site.empty-array %}
  {% assign survey-list = site.empty-array %}

  {% for media-item in media-list %}

    {% unless media-item.IsComparison == 'Y' %}
      {% assign news-list = news-list | push: media-item %}
    {% else %}
      {% assign survey-list = survey-list | push: media-item %}
    {% endif %}

  {% endfor %}

  {% if survey-list.size > 0 %}
    <h4>Questionnaires and Meeting Recordings</h4>

    {% include list-media-items.html item-list=survey-list %}
  {% endif %}

  {% if news-list.size > 0 %}
    <h4>News Items</h4>

    {% include list-media-items.html item-list=news-list %}
    
  {% endif %}
{% endcomment %}

{% endfor %}


