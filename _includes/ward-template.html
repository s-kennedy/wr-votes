---
layout: "default"
---
<p>
Attempt: 44
</p>
{% comment %}
Try to eat up all leading slashes and the trailing .html . 
This is gross but it works.
{% endcomment %}
{% assign ward-id = page.url | replace: '.html', '' | split: '/' | last -%}
{% assign ward-info = site.data.site-data.position-tags |
where:"PositionUniqueName",ward-id | first -%}


<h2>Who is Running?</h2>

{% assign municipal-info = site.data.site-data.municipality-map |
where:"Name",ward-info.WardMunicipality | first %}
{% assign races-split = municipal-info.Races | split: ',' %}

{% for race in races-split %}
  {% if race == "_SELF" %}
    {% assign race-id = ward-id %}
  {% else %}
    {% assign race-id = race %}
  {% endif %}

  {% assign race-info = site.data.site-data.position-tags |
  where:"PositionUniqueName",race-id | first -%}

<h3>{{ race-info.PositionDesc }}</h3>

  {% assign these-nominees = site.data.site-data.nominees 
    | where:"PositionUniqueName",race-id %}
  {% assign sorted-nominees = these-nominees | sort_natural: "Last_Name" %}
  <p>Sorted nominees size: "{{sorted-nominees.size}}"</p>

  {% if sorted-nominees.size > 0 %}
    <ul>
    {% for nominee in sorted-nominees %}
      <li>
      {% if nominee.Website -%}
      <a href="{{ nominee.Website}}">{{ nominee.Given_Names }} 
        {{ nominee.Last_Name }}</a>
      {%- else -%}
        {{ nominee.Given_Names}} {{ nominee.Last_Name }}
      {%- endif -%}
      </li>
    {% endfor %}
    </ul>
  {% else %}
    <p>
    Whoops! Nobody appears to be running for this position!
    Has democracy failed or are our records out of date?
    </p>
  {% endif %}

{% endfor %}


